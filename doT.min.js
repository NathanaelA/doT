(function(){"use strict";var e,t,n,r,u,i,o,a,s;o={append:{start:"' + (",end:") + '",endEncode:").encodeHTML() + '"},split:{start:"'; out += (",end:"); out += '",endEncode:").encodeHTML(); out += '"}};t={version:"0.2.0",templateSettings:{use:/\{\{#([\s\S]+?)\}\}/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,varname:"it",strip:true,"with":true,dynamicList:"it._dynamic",startend:o.append},startend:o,mangles:{},tags:{}};e={};u=0;i=/$^/;if(typeof module!=="undefined"&&module!==null?module.exports:void 0){module.exports=t}else if(typeof define!=="undefined"&&define!==null?define.amd:void 0){define(function(){return t})}else{this.doT=t}if(!String.prototype.encodeHTML){(function(){var e,t;t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"};e=/&(?!#?\w+;)|<|>|"|'|\//g;return String.prototype.encodeHTML=function(){return this.replace(e,function(e){return t[e]||e})}})()}t.unescape=s=function(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")};a=t.tags;a.interpolate={regex:/\{\{\s*=([\s\S]*?)\}\}/g,func:function(e,n){var r;r=t.templateSettings.startend;return r.start+s(n)+r.end}};a.encode={regex:/\{\{\s*!([\s\S]*?)\}\}/g,func:function(e,n){var r;r=t.templateSettings.startend;return r.start+s(n)+r.endEncode}};a.conditional={regex:/\{\{\s*\?(\?)?\s*([\s\S]*?)\}\}/g,func:function(e,t,n){if(t){if(n){return"' ; } else if ( "+s(n)+" ) { out += '"}else{return"'; } else { out += '"}}else{if(n){return"'; if ( "+s(n)+" ) { out += '"}else{return"'; } out += '"}}}};a.iterate={regex:/\{\{\s*~\s*(?:(\S+?)\s*\:\s*([\w$]+)\s*(?:=>\s*([\w$]+))?\s*)?\}\}/g,func:function(e,t,n,r){var i;if(!t){return"'; } } out += '"}if(!r){i=[n,"i"+ ++u],r=i[0],n=i[1]}t=s(t);return"';      var arr"+u+" = "+t+";      if( arr"+u+" ) {        var "+r+", "+n+" = -1, l"+u+" = arr"+u+".length-1;        while( "+n+" < l"+u+" ){          "+r+" = arr"+u+"["+n+" += 1];          out += '"}};a.iterateFor={regex:/\{\{\s*:\s*(?:(\S+?)\s*\:\s*([\w$]+)\s*(?:=>\s*([\w$]+))?\s*)?\}\}/g,func:function(e,t,n,r){var i,o;if(!t){return"'; } } out += '"}i="i"+ ++u;if(!r){o=[n,"i"+ ++u],r=o[0],n=o[1]}return"';      var "+i+" = "+t+";      if ( "+i+" ) {        var "+r+", "+n+";        for ("+n+" in "+i+" ) {          "+r+" = "+i+"[ "+n+" ];          out += '"}};a.content_for={regex:/\{\{\s*>([\s\S]*?)\}\}/g,func:function(e,t){this.multiple_contents=true;if(t){return"';      contents[current_out] = out;      out_stack.push(current_out);      current_out='"+s(t).trim()+"';      out = contents[current_out] = '"}else{return"';      contents[current_out] = out;      out = contents[current_out = out_stack.pop()] += '"}}};a.xx_includeDynamic={regex:/\{\{\s*@@\s*(\S+?)\(([\s\S]*?)\)\s*\}\}/g,func:function(e,n,r){var i;u+=1;i="tmpl"+u;return"';      var "+i+" = "+t.templateSettings.dynamicList+"[ '"+s(n)+"' ];      if ('string' === typeof "+i+") "+i+" = {name: "+i+"};      out += doT.render({name: "+i+".name, args: "+i+".args || arguments}) + '"}};a.xy_render={regex:/\{\{\s*@\s*(\S+?)\(([\s\S]*?)\)\s*\}\}/g,func:function(e,t,n){return"' + doT.render( '"+t+"' "+(n?","+s(n):"")+" ) + '"}};a.zz_evaluate={regex:/\{\{([\s\S]*?)\}\}/g,func:function(e,t){return"'; "+s(t)+"; out += '"}};n=t.mangles;n["05_define"]=r=function(e,t){var n,u;if(!(this.use||this.define)){return str}n=this;u=t.def||{};return e.toString().replace(n.define||i,function(e,t,r,i){if(t.indexOf("def.")===0){t=t.substring(4)}if(!(t in u)){if(r===":"){if(n.defineParams){i.replace(n.defineParams,function(e,n,r){return u[t]={arg:n,text:r}})}if(!(t in u)){u[t]=i}}else{new Function("def","def['"+t+"'] = "+i)(u)}}return""}).replace(n.use||i,function(e,i){var o;if(n.useParams){i=i.replace(n.useParams,function(e,t,n,r){var i;if(u[n]&&u[n].arg&&r){i=(n+":"+r).replace(/'|\\/g,"_");u.__exp=u.__exp||{};u.__exp[i]=u[n].text.replace(new RegExp("(^|[^\\w$])"+u[n].arg+"([^\\w$])","g"),"$1"+r+"$2");return t+("def.__exp['"+i+"']")}})}o=new Function("def","return "+i)(u);if(o){return r.call(n,o,t)}else{return o}})};n["10_strip"]=function(e,t){if(!this.strip){return e}return e.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,"")};n["20_escape_quotes"]=function(e,t){return e.replace(/'|\\/g,"\\$&")};n["50_tags"]=function(e,n){var r,u,i;i=Object.keys(t.tags).sort();for(r in i){u=i[r];e=e.replace(t.tags[u].regex,function(){return t.tags[u].func.apply(n,arguments)})}return e};n["70_escape_spaces"]=function(e,t){return e.replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")};n["80_cleanup"]=function(e,t){return e.replace(/(\s|;|}|^|{)out\+='';/g,"$1").replace(/\s*\+\s*''/g,"").replace(/(\s|;|}|^|{)out\+=''\+/g,"$1out+=")};n["80_function_basics"]=function(e,t){if(t.multiple_contents){return"      var out_stack = [], contents = {}, current_out = '_content';      var out = '"+e+"';      contents[current_out] = out;      return contents;    "}else{return" var out = '"+e+"';      return out;    "}};n["80_with"]=function(e,t){if(!this["with"]){return e}return"with("+(true===this["with"]?this.varname:this["with"])+") {"+e+"}"};n["95_functionize"]=function(e,t){try{return new Function(this.varname,e)}catch(n){throw new Error(""+n+' in "'+e+'"')}};t.compile=function(e,n){var r,u,i,o;r={def:n};o=Object.keys(t.mangles).sort();for(u in o){i=o[u];e=t.mangles[i].call(t.templateSettings,e,r)}return e};t.template=t.compile;t.getCached=function(t){if(!t){return e}if(!e[t]){throw new Error("Template not found: "+t)}return e[t]};t.setCached=function(t){return e=t};t.exportCached=function(){var t,n,r;r="";for(n in e){t=e[n];r+=',"'+n+'": '+t.toString()}return"{"+r.slice(1)+"}"};t.addCached=function(n,r){var u,i;if("object"===typeof n){for(i in n){u=n[i];t.addCached(i,u)}return}return e[n]=r};t.render=function(n){var r;if("object"!==typeof n){n={name:n}}if(!e[n.name]){r=t.autoload(n.name);if(false===r){throw new Error("Template not found: "+n.name)}t.addCached(n.name,t.compile(r))}return e[n.name].apply(this,n.args||Array.prototype.slice.call(arguments,1))};t.autoloadDOM=function(e){return function(e){var t;t=document.getElementById(e);if((t!=null?t.type:void 0)!=="text/x-dot-tmpl"){return false}return t.innerHTML}};t.autoloadFS=function(e){return function(t){try{return e.fs.readFileSync(""+e.root+"/"+t.replace(".","/")+".tmpl")}catch(n){return false}}};t.autoloadFail=function(){return false};t.autoload=t.autoloadDOM()}).call(this);